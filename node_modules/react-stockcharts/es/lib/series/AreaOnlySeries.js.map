{"version":3,"sources":["../../../../src/lib/series/AreaOnlySeries.js"],"names":["React","Component","PropTypes","area","d3Area","GenericChartComponent","getAxisCanvas","hexToRGBA","isDefined","first","functor","AreaOnlySeries","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","yAccessor","defined","base","fill","stroke","opacity","interpolation","canvasClip","xScale","yScale","chartConfig","plotData","xAccessor","save","fillStyle","strokeStyle","beginPath","newBase","areaSeries","d","x","Math","round","y0","y1","context","curve","restore","style","className","newClassName","concat","propTypes","string","func","isRequired","number","oneOfType","object","defaultProps","isNaN","range"],"mappings":"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","file":"AreaOnlySeries.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { area as d3Area } from \"d3-shape\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nimport { hexToRGBA, isDefined, first, functor } from \"../utils\";\n\nclass AreaOnlySeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { yAccessor, defined, base } = this.props;\n\t\tconst { fill, stroke, opacity, interpolation, canvasClip } = this.props;\n\n\t\tconst { xScale, chartConfig: { yScale }, plotData, xAccessor } = moreProps;\n\n\t\tif (canvasClip) {\n\t\t\tctx.save();\n\t\t\tcanvasClip(ctx, moreProps);\n\t\t}\n\n\t\tctx.fillStyle = hexToRGBA(fill, opacity);\n\t\tctx.strokeStyle = stroke;\n\n\t\tctx.beginPath();\n\t\tconst newBase = functor(base);\n\t\tconst areaSeries = d3Area()\n\t\t\t.defined(d => defined(yAccessor(d)))\n\t\t\t.x((d) => Math.round(xScale(xAccessor(d))))\n\t\t\t.y0((d) => newBase(yScale, d, moreProps))\n\t\t\t.y1((d) => Math.round(yScale(yAccessor(d))))\n\t\t\t.context(ctx);\n\n\t\tif (isDefined(interpolation)) {\n\t\t\tareaSeries.curve(interpolation);\n\t\t}\n\t\tareaSeries(plotData);\n\t\tctx.fill();\n\n\t\tif (canvasClip) {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { yAccessor, defined, base, style } = this.props;\n\t\tconst { stroke, fill, className, opacity, interpolation } = this.props;\n\n\t\tconst { xScale, chartConfig: { yScale }, plotData, xAccessor } = moreProps;\n\n\t\tconst newBase = functor(base);\n\t\tconst areaSeries = d3Area()\n\t\t\t.defined(d => defined(yAccessor(d)))\n\t\t\t.x((d) => Math.round(xScale(xAccessor(d))))\n\t\t\t.y0((d) => newBase(yScale, d, moreProps))\n\t\t\t.y1((d) => Math.round(yScale(yAccessor(d))));\n\n\t\tif (isDefined(interpolation)) {\n\t\t\tareaSeries.curve(interpolation);\n\t\t}\n\n\t\tconst d = areaSeries(plotData);\n\t\tconst newClassName = className.concat(isDefined(stroke) ? \"\" : \" line-stroke\");\n\t\treturn (\n\t\t\t<path\n\t\t\t\tstyle={style}\n\t\t\t\td={d}\n\t\t\t\tstroke={stroke}\n\t\t\t\tfill={fill}\n\t\t\t\tclassName={newClassName}\n\t\t\t\tfillOpacity={opacity}\n\t\t\t/>\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericChartComponent\n\t\t\t\tsvgDraw={this.renderSVG}\n\t\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\t\tdrawOn={[\"pan\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nAreaOnlySeries.propTypes = {\n\tclassName: PropTypes.string,\n\tyAccessor: PropTypes.func.isRequired,\n\tstroke: PropTypes.string,\n\tfill: PropTypes.string,\n\topacity: PropTypes.number,\n\tdefined: PropTypes.func,\n\tbase: PropTypes.oneOfType([\n\t\tPropTypes.func, PropTypes.number\n\t]),\n\tinterpolation: PropTypes.func,\n\tcanvasClip: PropTypes.func,\n\tstyle: PropTypes.object,\n};\n\nAreaOnlySeries.defaultProps = {\n\tclassName: \"line \",\n\tfill: \"none\",\n\topacity: 1,\n\tdefined: d => !isNaN(d),\n\tbase: (yScale /* , d, moreProps */) => first(yScale.range()),\n};\n\nexport default AreaOnlySeries;\n"]}